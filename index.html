<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tej Kumar Writings - Story Book Collection</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        :root {
            /* Light Mode Colors */
            --primary: #6d5d6e;
            --secondary: #4f4557;
            --accent: #f4eee0;
            --light: #f8f5f2;
            --dark: #393646;
            --highlight: #a78295;
            
            /* Text Colors */
            --text-primary: #333;
            --text-secondary: #666;
            --text-light: #888;
            
            /* Background Colors */
            --bg-primary: #f8f5f2;
            --bg-secondary: #e9e2d9;
            --bg-card: white;
            --bg-input: white;
            
            /* Border Colors */
            --border-color: #ddd;
            
            /* Shadow */
            --shadow-color: rgba(0, 0, 0, 0.1);
            --shadow-hover: rgba(0, 0, 0, 0.15);
        }
        
        /* Dark Mode Colors */
        [data-theme="dark"] {
            --primary: #9f8aa4;
            --secondary: #6d5d6e;
            --accent: #4f4557;
            --light: #393646;
            --dark: #f4eee0;
            --highlight: #c9a7b8;
            
            /* Text Colors */
            --text-primary: #f8f5f2;
            --text-secondary: #d9d1c7;
            --text-light: #b0a9a1;
            
            /* Background Colors */
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-card: #0f3460;
            --bg-input: #1e2a4a;
            
            /* Border Colors */
            --border-color: #2d3748;
            
            /* Shadow */
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
        }
        
        body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles with Zoomed Logo */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 60px 0 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: padding 0.3s ease;
        }
        
        header.scrolled {
            padding: 15px 0;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.05)"/></svg>');
            background-size: cover;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
        }
        
        header.scrolled .header-content {
            transform: scale(0.9);
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        header.scrolled .logo-container {
            margin-bottom: 5px;
            gap: 15px;
        }
        
        .main-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid rgba(255,255,255,0.4);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            transition: all 0.3s ease;
            background: white;
            padding: 10px;
            transform: scale(1.1);
        }
        
        header.scrolled .main-logo {
            width: 50px;
            height: 50px;
            border-width: 2px;
            transform: scale(1);
        }
        
        .logo-text {
            text-align: left;
        }
        
        .logo-text h1 {
            font-size: 3.2rem;
            margin-bottom: 8px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        header.scrolled .logo-text h1 {
            font-size: 1.8rem;
        }
        
        .logo-text p {
            font-size: 1.4rem;
            opacity: 0.9;
            margin: 0;
            transition: all 0.3s ease;
        }
        
        header.scrolled .logo-text p {
            font-size: 0;
            opacity: 0;
            height: 0;
        }
        
        header p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 20px;
            padding: 0 15px;
            transition: all 0.3s ease;
        }
        
        header.scrolled p {
            font-size: 0;
            opacity: 0;
            margin: 0;
            padding: 0;
            height: 0;
        }
        
        .author-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        
        header.scrolled .author-badge {
            font-size: 0;
            padding: 0;
            opacity: 0;
            height: 0;
        }
        
        /* Floating Mini Logo */
        .floating-logo {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(255,255,255,0.5);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.8);
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
            padding: 6px;
        }
        
        .floating-logo.visible {
            opacity: 0.8;
            visibility: visible;
            transform: scale(1);
        }
        
        .floating-logo:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        /* Fallback logo styling */
        .logo-fallback {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            border: 5px solid rgba(255,255,255,0.4);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            transform: scale(1.1);
        }
        
        header.scrolled .logo-fallback {
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
            border-width: 2px;
            transform: scale(1);
        }
        
        .floating-logo-fallback {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.6rem;
            font-weight: bold;
            border: 3px solid rgba(255,255,255,0.5);
        }
        
        /* Navigation */
        nav {
            background: var(--bg-card);
            box-shadow: 0 2px 10px var(--shadow-color);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            padding: 0 10px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
            cursor: pointer;
            padding: 5px 10px;
            font-size: 0.9rem;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        /* Theme Toggle Button */
        .theme-toggle {
            background: transparent;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px 10px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .theme-toggle:hover {
            background: rgba(var(--primary-rgb), 0.1);
            transform: rotate(15deg);
        }
        
        .theme-toggle .fa-sun {
            color: #ffc107;
        }
        
        .theme-toggle .fa-moon {
            color: #6d5d6e;
        }
        
        [data-theme="dark"] .theme-toggle .fa-moon {
            color: #f4eee0;
        }
        
        /* Admin Login/Logout Button */
        .admin-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(109, 93, 110, 0.3);
        }
        
        .admin-btn.logout {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin: 30px 0;
        }
        
        .upload-section, .library-section, .about-section, .contact-section {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px var(--shadow-color);
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            border: 1px solid var(--border-color);
        }
        
        .upload-section:hover, .library-section:hover, .about-section:hover, .contact-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px var(--shadow-hover);
        }
        
        .section-title {
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent);
            font-size: 1.6rem;
        }
        
        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--primary);
            border-radius: 12px;
            padding: 25px 15px;
            text-align: center;
            margin: 20px 0;
            background: rgba(109, 93, 110, 0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            background: rgba(109, 93, 110, 0.1);
            border-color: var(--highlight);
        }
        
        .upload-area i {
            font-size: 40px;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .drive-link-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            margin-top: 10px;
            transition: border 0.3s;
            background: var(--bg-input);
            color: var(--text-primary);
        }
        
        .drive-link-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(109, 93, 110, 0.2);
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.95rem;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
            background: var(--bg-input);
            color: var(--text-primary);
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(109, 93, 110, 0.2);
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        /* Password Input with Toggle */
        .password-wrapper {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            padding: 5px;
        }
        
        .toggle-password:hover {
            color: var(--primary);
        }
        
        /* Buttons */
        .submit-btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--highlight) 100%);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(167, 130, 149, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(167, 130, 149, 0.4);
        }
        
        /* Book Library */
        .book-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            width: 100%;
        }
        
        .book-card {
            background: var(--light);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 1px solid var(--border-color);
        }
        
        .book-card.pending {
            opacity: 0.7;
            border-left: 4px solid #ff9800;
        }
        
        .book-card.approved {
            border-left: 4px solid #4CAF50;
        }
        
        .book-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--highlight) 100%);
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px var(--shadow-hover);
        }
        
        .book-cover {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin-bottom: 12px;
            box-shadow: 0 4px 10px var(--shadow-color);
            flex-shrink: 0;
            overflow: hidden;
        }
        
        .book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .book-title {
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.3;
        }
        
        .book-author {
            color: var(--primary);
            font-size: 0.85rem;
            margin-bottom: 8px;
            line-height: 1.3;
        }
        
        .book-genre {
            display: inline-block;
            background: rgba(109, 93, 110, 0.1);
            color: var(--primary);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
        }
        
        /* Book Status Badge */
        .book-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-top: 5px;
            text-transform: uppercase;
        }
        
        .status-pending {
            background-color: rgba(255, 152, 0, 0.1);
            color: #ff9800;
        }
        
        .status-approved {
            background-color: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
        }
        
        /* Book Rating */
        .book-rating {
            margin-top: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        .book-rating .stars {
            color: #ffc107;
            font-size: 0.9rem;
        }
        
        .book-rating .rating-value {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        /* Share Button on Book Cards */
        .share-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: var(--primary);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .book-card:hover .share-btn {
            opacity: 1;
        }
        
        .share-btn:hover {
            background: white;
            color: var(--highlight);
            transform: scale(1.1);
        }

        /* Admin Controls on Book Cards */
        .admin-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .book-card:hover .admin-controls {
            opacity: 1;
        }
        
        .admin-control-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }
        
        .admin-control-btn.approve {
            background: #4CAF50;
            color: white;
        }
        
        .admin-control-btn.delete {
            background: #f44336;
            color: white;
        }
        
        .admin-control-btn:hover {
            transform: scale(1.1);
        }
        
        /* Empty Library State */
        .empty-library {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
            width: 100%;
        }

        .empty-library i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--text-light);
        }

        .empty-library h3 {
            margin-bottom: 10px;
            color: var(--secondary);
            font-size: 1.3rem;
        }

        .empty-library p {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Admin Panel Section */
        .admin-panel-section {
            background: var(--light);
            border-radius: 12px;
            padding: 18px;
            margin-top: 20px;
            border-left: 4px solid var(--primary);
            border: 1px solid var(--border-color);
            display: none;
        }
        
        .admin-panel-section.active {
            display: block;
        }

        .admin-panel-section h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
        }
        
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .admin-tab-btn {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .admin-tab-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .admin-tab-btn:hover:not(.active) {
            background: rgba(109, 93, 110, 0.1);
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        .admin-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .admin-list-item {
            background: var(--bg-card);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-list-item-info {
            flex: 1;
        }
        
        .admin-list-item-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .admin-list-item-meta {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }
        
        .admin-list-item-actions {
            display: flex;
            gap: 8px;
        }
        
        .admin-action-btn {
            padding: 6px 12px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .admin-action-btn.approve {
            background: #4CAF50;
            color: white;
        }
        
        .admin-action-btn.delete {
            background: #f44336;
            color: white;
        }
        
        .admin-action-btn.view {
            background: #2196F3;
            color: white;
        }
        
        .admin-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .comment-item {
            background: var(--bg-card);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }
        
        .comment-author {
            font-weight: 600;
            color: var(--primary);
        }
        
        .comment-book {
            color: var(--text-secondary);
            font-style: italic;
        }
        
        .comment-text {
            font-size: 0.9rem;
            line-height: 1.4;
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        /* About Section Styles */
        .about-content {
            line-height: 1.7;
        }

        .about-content h3 {
            color: var(--secondary);
            margin: 18px 0 8px 0;
            font-size: 1.2rem;
        }

        .about-content ul {
            margin-left: 18px;
            margin-bottom: 18px;
        }

        .about-content li {
            margin-bottom: 6px;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 18px;
        }

        .feature-item {
            background: var(--light);
            padding: 18px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .feature-item i {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .feature-item h4 {
            font-size: 1rem;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .feature-item p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Contact Section Styles */
        .contact-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 18px;
        }

        .contact-method {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s;
            border: 1px solid var(--border-color);
        }

        .contact-method:hover {
            transform: translateY(-3px);
        }

        .contact-method i {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 12px;
        }

        .contact-method h4 {
            color: var(--secondary);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .contact-method a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .contact-method a:hover {
            text-decoration: underline;
        }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--dark) 100%);
            color: white;
            padding: 30px 0 15px;
            margin-top: 40px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .footer-section h3 {
            margin-bottom: 12px;
            font-size: 1.1rem;
            position: relative;
            padding-bottom: 8px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 35px;
            height: 2px;
            background: var(--accent);
        }
        
        .contact-info a {
            color: var(--accent);
            text-decoration: none;
            display: block;
            margin-bottom: 6px;
            transition: color 0.3s;
            font-size: 0.9rem;
        }
        
        .contact-info a:hover {
            color: white;
        }
        
        .social-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .social-links a:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.7);
            font-size: 0.85rem;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
            padding: 15px;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 10px 30px var(--shadow-hover);
            animation: slideUp 0.3s ease;
            border: 1px solid var(--border-color);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-buttons {
            margin-top: 18px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .modal-ok-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .copy-btn {
            background: var(--highlight);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-left: 0;
            font-size: 0.9rem;
        }

        .email-display {
            background: var(--light);
            padding: 12px;
            border-radius: 8px;
            margin: 12px 0;
            text-align: left;
            border-left: 4px solid var(--primary);
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
        }

        .email-display h4 {
            margin-bottom: 8px;
            color: var(--secondary);
            font-size: 1rem;
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Sorting Controls */
        .sorting-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .sorting-controls select {
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.9rem;
            background: var(--bg-input);
            color: var(--text-primary);
            cursor: pointer;
        }

        .sorting-controls label {
            font-weight: 600;
            color: var(--secondary);
            font-size: 0.9rem;
        }

        /* Book Detail Modal */
        .book-detail-modal-content {
            max-width: 900px;
            padding: 0;
            overflow: hidden;
        }
        
        .book-detail-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px;
            position: relative;
        }
        
        .book-detail-header .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        .book-detail-main {
            display: flex;
            padding: 25px;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .book-detail-cover {
            flex: 0 0 250px;
        }
        
        .book-detail-cover img {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 5px 15px var(--shadow-color);
        }
        
        .book-detail-cover .cover-placeholder {
            width: 100%;
            height: 350px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            box-shadow: 0 5px 15px var(--shadow-color);
        }
        
        .book-detail-info {
            flex: 1;
            min-width: 300px;
        }
        
        .book-detail-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .book-detail-author {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .book-detail-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .book-detail-genre {
            background: var(--primary);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .book-detail-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }
        
        .book-detail-rating .stars {
            color: #ffc107;
        }
        
        .book-detail-description {
            margin-bottom: 25px;
            line-height: 1.7;
            color: var(--text-secondary);
        }
        
        .book-detail-actions {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .book-detail-btn {
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .book-detail-btn.primary {
            background: var(--primary);
            color: white;
        }
        
        .book-detail-btn.secondary {
            background: var(--light);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .book-detail-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow-color);
        }
        
        .book-detail-comments {
            margin-top: 25px;
        }
        
        .comments-list {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            padding-right: 10px;
        }

        .comment {
            background: var(--light);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 3px solid var(--primary);
            border: 1px solid var(--border-color);
            position: relative;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        .comment-author {
            font-weight: 600;
            color: var(--primary);
        }

        .comment-date {
            color: var(--text-light);
        }

        .comment-text {
            font-size: 0.9rem;
            line-height: 1.4;
            color: var(--text-secondary);
        }

        .add-comment {
            margin-top: 20px;
        }

        .add-comment textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            resize: vertical;
            min-height: 80px;
            margin-bottom: 10px;
            background: var(--bg-input);
            color: var(--text-primary);
        }

        .add-comment button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Admin comment delete button */
        .comment-delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #f44336;
            color: white;
            border: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.7rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .comment:hover .comment-delete-btn {
            opacity: 1;
        }
        
        /* Cover Photo Upload */
        .cover-upload-area {
            border: 2px dashed var(--primary);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            background: rgba(109, 93, 110, 0.05);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .cover-upload-area:hover {
            background: rgba(109, 93, 110, 0.1);
            border-color: var(--highlight);
        }
        
        .cover-upload-area i {
            font-size: 40px;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .cover-preview {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }
        
        /* Share Modal */
        .share-modal-content {
            max-width: 500px;
            text-align: center;
        }
        
        .share-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s;
            min-width: 100px;
        }
        
        .share-option:hover {
            background: var(--light);
            transform: translateY(-3px);
        }
        
        .share-option i {
            font-size: 2rem;
            color: var(--primary);
        }
        
        .share-link {
            background: var(--light);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            word-break: break-all;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        /* Upload Success Message */
        .upload-success {
            background-color: rgba(212, 237, 218, 0.2);
            border: 1px solid rgba(195, 230, 203, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: var(--text-primary);
            display: none;
        }

        /* Timer Display */
        .timer-display {
            background-color: rgba(33, 150, 243, 0.1);
            border: 1px solid rgba(33, 150, 243, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .timer-display i {
            color: #2196F3;
            margin-right: 8px;
        }

        .timer-display strong {
            color: #2196F3;
        }

        /* Login Modal */
        .login-modal-content {
            max-width: 400px;
        }

        .login-form {
            text-align: left;
        }

        .error-message {
            color: #f44336;
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }

        /* Admin Panel Indicator */
        .admin-panel-indicator {
            position: fixed;
            top: 70px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 999;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out;
        }

        /* Mobile Responsive */
        @media (max-width: 480px) {
            header {
                padding: 40px 0 20px;
            }
            
            .logo-container {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .main-logo {
                width: 100px;
                height: 100px;
            }
            
            .logo-text h1 {
                font-size: 2.5rem;
            }
            
            .logo-text p {
                font-size: 1.2rem;
            }
            
            header.scrolled .logo-text h1 {
                font-size: 1.5rem;
            }
            
            .logo-fallback {
                width: 100px;
                height: 100px;
                font-size: 2.2rem;
            }
            
            header.scrolled .logo-fallback {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .nav-links {
                gap: 10px;
            }
            
            .nav-links a {
                font-size: 0.85rem;
                padding: 4px 8px;
            }
            
            .book-list {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 12px;
            }
            
            .book-card {
                padding: 12px;
                min-height: 220px;
            }
            
            .book-cover {
                height: 100px;
                font-size: 1.8rem;
            }
            
            .book-title {
                font-size: 0.9rem;
            }
            
            .book-author {
                font-size: 0.8rem;
            }
            
            .feature-list, .contact-methods {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .floating-logo {
                width: 55px;
                height: 55px;
                bottom: 15px;
                right: 15px;
            }
            
            .book-detail-main {
                padding: 15px;
                flex-direction: column;
            }
            
            .book-detail-cover {
                flex: 0 0 auto;
            }
            
            .book-detail-cover img,
            .book-detail-cover .cover-placeholder {
                height: 250px;
            }
            
            .book-detail-title {
                font-size: 1.5rem;
            }
            
            .book-detail-author {
                font-size: 1rem;
            }
            
            .admin-list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .admin-list-item-actions {
                width: 100%;
                justify-content: flex-end;
            }

            .sorting-controls {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (min-width: 768px) {
            .main-content {
                flex-direction: row;
            }
            
            .upload-section, .library-section {
                flex: 1;
            }
            
            .book-list {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }
    </style>
</head>
<body>
    <!-- Floating Mini Logo -->
    <div class="floating-logo-container">
        <img src="https://drive.google.com/thumbnail?id=1OFULHvS5bE9ZjFPrroDoG4kYcQzFy3bC&sz=w1000" 
             alt="Tej Kumar Writings Logo" 
             class="floating-logo"
             onerror="this.style.display='none'; document.getElementById('floatingLogoFallback').style.display='flex';"
             onclick="scrollToTop()">
        <div id="floatingLogoFallback" class="floating-logo-fallback" style="display: none;" onclick="scrollToTop()">
            TK
        </div>
    </div>

    <!-- Header Section with Updated Logo -->
    <header id="mainHeader">
        <div class="container header-content">
            <div class="logo-container">
                <img src="https://drive.google.com/thumbnail?id=1OFULHvS5bE9ZjFPrroDoG4kYcQzFy3bC&sz=w1000" 
                     alt="Tej Kumar Writings Logo" 
                     class="main-logo"
                     onerror="this.style.display='none'; document.getElementById('mainLogoFallback').style.display='flex';">
                <div id="mainLogoFallback" class="logo-fallback" style="display: none;">
                    TK
                </div>
                <div class="logo-text">
                    <h1>Tej Kumar Writings</h1>
                    <p>Discover captivating stories and literary adventures from Tej Kumar</p>
                </div>
            </div>
            <div class="author-badge">
                <i class="fas fa-pen-fancy"></i> Author & Storyteller
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <div class="logo">Tej Kumar Writings</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showSection('home')"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#" onclick="showSection('library')"><i class="fas fa-book"></i> Library</a></li>
                <li><a href="#" onclick="showSection('about')"><i class="fas fa-user"></i> About</a></li>
                <li><a href="#" onclick="showSection('contact')"><i class="fas fa-envelope"></i> Contact</a></li>
                <li>
                    <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                        <i class="fas fa-moon" id="themeIcon"></i>
                    </button>
                </li>
                <li>
                    <button class="admin-btn" id="adminLoginBtn" onclick="showLoginModal()">
                        <i class="fas fa-user-shield"></i> Admin Login
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Admin Panel Indicator -->
    <div class="admin-panel-indicator" id="adminPanelIndicator">
        <i class="fas fa-user-shield"></i> Admin Mode Active
    </div>

    <!-- Home Section -->
    <div class="container">
        <div id="home" class="page-section active">
            <div class="main-content">
                <!-- Upload Section -->
                <section class="upload-section fade-in">
                    <h2 class="section-title">Share Your Story</h2>
                    <p><strong>How it works:</strong> Upload your book to Google Drive and share the link below. All submissions will be automatically approved after 48 hours.</p>
                    
                    <!-- Book Cover Photo Upload -->
                    <div class="form-group">
                        <label for="bookCoverLink">Book Cover Photo (Google Drive Link)</label>
                        <input type="url" id="bookCoverLink" placeholder="https://drive.google.com/thumbnail?id=..." class="drive-link-input">
                        <small style="display: block; margin-top: 5px; color: var(--text-light);">Optional: Share a Google Drive link to your book cover image (use thumbnail link for faster loading)</small>
                    </div>
                    
                    <div class="upload-area" onclick="document.getElementById('driveLink').focus()">
                        <i class="fab fa-google-drive"></i>
                        <h3>Google Drive Link for Book</h3>
                        <p>Paste your shareable Google Drive link here</p>
                        <input type="url" id="driveLink" class="drive-link-input" placeholder="https://drive.google.com/file/d/...">
                    </div>

                    <div class="book-details">
                        <div class="form-group">
                            <label for="bookTitle">Book Title *</label>
                            <input type="text" id="bookTitle" placeholder="Enter your book title" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="bookAuthor">Author Name *</label>
                            <input type="text" id="bookAuthor" placeholder="Enter author name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="bookDescription">Book Description</label>
                            <textarea id="bookDescription" placeholder="Briefly describe your story"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="bookGenre">Genre</label>
                            <select id="bookGenre">
                                <option value="">Select a genre</option>
                                <option value="fiction">Fiction</option>
                                <option value="narrative">Narrative</option>
                                <option value="novel">Novel</option>
                                <option value="science-fiction">Science Fiction</option>
                                <option value="non-fiction">Non-fiction</option>
                                <option value="mystery">Mystery</option>
                                <option value="historical-fiction">Historical Fiction</option>
                                <option value="genre-fiction">Genre Fiction</option>
                                <option value="thriller">Thriller</option>
                                <option value="short-story">Short Story</option>
                                <option value="romance-novel">Romance Novel</option>
                                <option value="fantasy-fiction">Fantasy Fiction</option>
                                <option value="young-adult">Young Adult Literature</option>
                                <option value="crime-fiction">Crime Fiction</option>
                                <option value="crime">Crime</option> <!-- Added crime option -->
                                <option value="literary-fiction">Literary Fiction</option>
                                <option value="horror-fiction">Horror Fiction</option>
                                <option value="childrens-literature">Children's Literature</option>
                                <option value="biography">Biography</option>
                                <option value="poetry">Poetry</option>
                                <option value="memoir">Memoir</option>
                                <option value="self-help">Self-help Book</option>
                                <option value="graphic-novel">Graphic Novel</option>
                                <option value="womens-fiction">Women's Fiction</option>
                                <option value="essay">Essay</option>
                                <option value="historical-romance">Historical Romance</option>
                                <option value="adventure-fiction">Adventure Fiction</option>
                                <option value="horror">Horror</option>
                                <option value="magical-realism">Magical Realism</option>
                                <option value="fairy-tale">Fairy Tale</option>
                                <option value="speculative-fiction">Speculative Fiction</option>
                                <option value="contemporary-romance">Contemporary Romance</option>
                                <option value="autobiography">Autobiography</option>
                                <option value="history">History</option>
                                <option value="humor">Humor</option>
                                <option value="science">Science</option>
                                <option value="true-crime">True Crime</option>
                                <option value="fantasy">Fantasy</option>
                                <option value="travel-literature">Travel Literature</option>
                                <option value="science-fantasy">Science Fantasy</option>
                                <option value="social-science">Social Science</option>
                                <option value="gothic-fiction">Gothic Fiction</option>
                                <option value="drama">Drama</option>
                                <option value="satire">Satire</option>
                                <option value="contemporary-literature">Contemporary Literature</option>
                                <option value="new-adult-fiction">New Adult Fiction</option>
                                <option value="spirituality">Spirituality</option>
                                <option value="western-fiction">Western Fiction</option>
                                <option value="action">Action</option>
                                <option value="chivalric-romance">Chivalric Romance</option>
                                <option value="prose">Prose</option>
                                <option value="dark-fantasy">Dark Fantasy</option>
                                <option value="psychological">Psychological</option>
                                <option value="psychology">Psychology</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="submitterEmail">Your Email *</label>
                            <input type="email" id="submitterEmail" placeholder="Enter your email for updates" required>
                        </div>
                        
                        <button class="submit-btn" onclick="submitBook()">
                            <i class="fas fa-cloud-upload-alt"></i> Submit Book
                        </button>
                    </div>

                    <!-- Upload Success Message -->
                    <div class="upload-success" id="uploadSuccess">
                        <h4><i class="fas fa-check-circle"></i> Book Submitted Successfully!</h4>
                        <p>Your book has been added to the library and will be <strong>automatically approved after 48 hours</strong>.</p>
                        <p>You can view it in the "Pending Books" section until approval.</p>
                    </div>

                    <!-- Admin Panel (Visible only when admin is logged in) -->
                    <div class="admin-panel-section" id="adminPanel">
                        <h4><i class="fas fa-user-shield"></i> Admin Control Panel</h4>
                        
                        <div class="admin-tabs">
                            <button class="admin-tab-btn active" onclick="showAdminTab('pending')">Pending Books</button>
                            <button class="admin-tab-btn" onclick="showAdminTab('all')">All Books</button>
                            <button class="admin-tab-btn" onclick="showAdminTab('comments')">All Comments</button>
                        </div>
                        
                        <!-- Pending Books Tab -->
                        <div id="pendingTab" class="admin-tab-content active">
                            <div class="admin-list" id="adminPendingBooksList">
                                <!-- Pending books will be listed here -->
                            </div>
                        </div>
                        
                        <!-- All Books Tab -->
                        <div id="allTab" class="admin-tab-content">
                            <div class="admin-list" id="adminAllBooksList">
                                <!-- All books will be listed here -->
                            </div>
                        </div>
                        
                        <!-- All Comments Tab -->
                        <div id="commentsTab" class="admin-tab-content">
                            <div class="admin-list" id="adminCommentsList">
                                <!-- All comments will be listed here -->
                            </div>
                        </div>
                    </div>

                    <!-- Automatic Approval Info -->
                    <div class="admin-section" id="autoApprovalInfo">
                        <h4><i class="fas fa-robot"></i> Automatic Approval System</h4>
                        <p>Our system automatically approves books after 48 hours without any manual intervention.</p>
                        
                        <div class="timer-display">
                            <i class="fas fa-clock"></i>
                            <strong>Next Auto-Approval Check:</strong> <span id="nextCheckTimer">Loading...</span>
                        </div>
                        
                        <ol class="approval-steps">
                            <li>Submit your book using the form above</li>
                            <li>Book appears in "Pending Books" section immediately</li>
                            <li>System checks for pending books every time you visit</li>
                            <li>Books older than 48 hours are automatically approved</li>
                            <li>Approved books appear in the main library</li>
                        </ol>
                    </div>
                </section>

                <!-- Library Section -->
                <section class="library-section fade-in">
                    <h2 class="section-title">Approved Story Library</h2>
                    
                    <!-- Sorting Controls -->
                    <div class="sorting-controls">
                        <label for="sortBy">Sort by:</label>
                        <select id="sortBy" onchange="sortBooks('approved')">
                            <option value="uploadDate">Upload Date (Newest)</option>
                            <option value="title">Title (A-Z)</option>
                            <option value="genre">Genre</option>
                            <option value="rating">Rating (Highest)</option>
                        </select>
                    </div>
                    
                    <div class="book-list" id="approvedBookList">
                        <!-- Approved books will be dynamically added here -->
                    </div>
                    
                    <!-- Pending Books Section -->
                    <h3 class="section-title" style="margin-top: 30px;">Pending Books (Auto-Approval in Progress)</h3>
                    <p>These books will be automatically approved after 48 hours. Check back later!</p>
                    
                    <div class="book-list" id="pendingBookList">
                        <!-- Pending books will be dynamically added here -->
                    </div>
                </section>
            </div>
        </div>

        <!-- Library Section (Standalone) -->
        <div id="library" class="page-section">
            <section class="library-section fade-in">
                <h2 class="section-title">Our Story Library</h2>
                <p>Discover amazing stories from talented writers. Click on any book to view details.</p>
                
                <!-- Sorting Controls -->
                <div class="sorting-controls">
                    <label for="sortByLibrary">Sort by:</label>
                    <select id="sortByLibrary" onchange="sortBooks('library')">
                        <option value="uploadDate">Upload Date (Newest)</option>
                        <option value="title">Title (A-Z)</option>
                        <option value="genre">Genre</option>
                        <option value="rating">Rating (Highest)</option>
                    </select>
                </div>
                
                <div class="book-list" id="bookListLibrary">
                    <!-- Books will be dynamically added here -->
                </div>
            </section>
        </div>

        <!-- About Section -->
        <div id="about" class="page-section">
            <section class="about-section fade-in">
                <h2 class="section-title">About Tej Kumar Writings</h2>
                <div class="about-content">
                    <p>Welcome to <strong>Tej Kumar Writings</strong> - a platform dedicated to showcasing amazing stories and connecting readers with talented writers from around the world.</p>
                    
                    <h3> Our Mission</h3>
                    <p>We believe everyone has a story to tell. Our mission is to provide a free platform where writers can share their work and readers can discover new, exciting stories across various genres.</p>
                    
                    <h3> How to Publish Your Book for FREE</h3>
                    <p>Publishing your book with us is completely free and simple:</p>
                    <ol>
                        <li><strong>Upload to Google Drive:</strong> Save your book file (PDF, DOCX, etc.) to your Google Drive</li>
                        <li><strong>Get Shareable Link:</strong> Right-click the file  Share  Copy link</li>
                        <li><strong>Submit on Our Website:</strong> Fill out the form with your book details and paste the link</li>
                        <li><strong>Automatic Approval:</strong> Our system automatically approves books after 48 hours</li>
                        <li><strong>Published!</strong> Once approved, your book appears in our library</li>
                    </ol>
                    
                    <h3> What We Offer</h3>
                    <div class="feature-list">
                        <div class="feature-item">
                            <i class="fas fa-book-open"></i>
                            <h4>Free Publishing</h4>
                            <p>Share your stories with the world at no cost</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-robot"></i>
                            <h4>Auto-Approval</h4>
                            <p>Books approved automatically after 48 hours</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-images"></i>
                            <h4>Cover Photos</h4>
                            <p>Add book cover images to make your book stand out</p>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-share-alt"></i>
                            <h4>Easy Sharing</h4>
                            <p>Share books with friends and on social media</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Section -->
        <div id="contact" class="page-section">
            <section class="contact-section fade-in">
                <h2 class="section-title">Get In Touch</h2>
                <p>Have questions about publishing your book or want to get in touch with Tej Kumar? Use the contact methods below.</p>
                
                <div class="contact-methods">
                    <div class="contact-method">
                        <i class="fas fa-envelope"></i>
                        <h4>Email</h4>
                        <a href="mailto:tej9079917@gmail.com">tej9079917@gmail.com</a>
                    </div>
                    <div class="contact-method">
                        <i class="fab fa-instagram"></i>
                        <h4>Instagram</h4>
                        <a href="https://instagram.com/my_self_tej_" target="_blank">@my_self_tej_</a>
                    </div>
                    <div class="contact-method">
                        <i class="fas fa-phone"></i>
                        <h4>Phone</h4>
                        <a href="tel:+916309645717">+91 6309645717</a>
                    </div>
                    <div class="contact-method">
                        <i class="fab fa-whatsapp"></i>
                        <h4>WhatsApp</h4>
                        <a href="https://wa.me/916309645717" target="_blank">+91 6309645717</a>
                    </div>
                </div>
                
                <div class="admin-section">
                    <h4><i class="fas fa-exclamation-circle"></i> Important Note</h4>
                    <p>For book submissions, please use the submission form on the Home page. Books are automatically approved after 48 hours without manual review.</p>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Tej Kumar Writings</h3>
                    <p>A platform for writers to share their stories and readers to discover new literary adventures.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <div class="contact-info">
                        <a href="#" onclick="showSection('home')">Home</a>
                        <a href="#" onclick="showSection('library')">Library</a>
                        <a href="#" onclick="showSection('about')">About</a>
                        <a href="#" onclick="showSection('contact')">Contact</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <div class="social-links">
                        <a href="https://twitter.com/Tej_Kumar_117" target="_blank"><i class="fab fa-twitter"></i></a>
                        <a href="https://instagram.com/my_self_tej_" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://wa.me/916309645717" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 Tej Kumar Writings. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <h3>Book Submitted Successfully!</h3>
            <p>Your book has been submitted and will be <strong>automatically approved after 48 hours</strong>.</p>
            <p>You can view it in the "Pending Books" section until approval.</p>
            <div class="modal-buttons">
                <button class="modal-ok-btn" onclick="closeModal()">OK</button>
            </div>
        </div>
    </div>

    <!-- Book Detail Modal -->
    <div id="bookDetailModal" class="modal">
        <div class="modal-content book-detail-modal-content">
            <div class="book-detail-header">
                <button class="close-modal" onclick="closeBookDetailModal()">&times;</button>
                <h3 id="detailBookTitle">Book Title</h3>
                <p id="detailBookAuthor">by Author Name</p>
            </div>
            <div class="book-detail-main">
                <div class="book-detail-cover">
                    <img id="detailBookCover" src="" alt="Book Cover" onerror="this.style.display='none'; document.getElementById('detailCoverPlaceholder').style.display='flex';">
                    <div id="detailCoverPlaceholder" class="cover-placeholder">
                        <i class="fas fa-book"></i>
                    </div>
                </div>
                <div class="book-detail-info">
                    <div class="book-detail-meta">
                        <span class="book-detail-genre" id="detailBookGenre">Genre</span>
                        <div class="book-detail-rating">
                            <span class="stars" id="detailBookStars"></span>
                            <span id="detailBookRating">0 (0)</span>
                        </div>
                    </div>
                    <div class="book-detail-description" id="detailBookDescription">
                        Book description will appear here...
                    </div>
                    <div class="book-detail-actions">
                        <button class="book-detail-btn primary" onclick="openBookFromDetail()">
                            <i class="fas fa-external-link-alt"></i> Read Book
                        </button>
                        <button class="book-detail-btn secondary" onclick="shareBookFromDetail()">
                            <i class="fas fa-share-alt"></i> Share
                        </button>
                    </div>
                    <div class="book-detail-comments">
                        <h4>Reader Comments</h4>
                        <div class="comments-list" id="detailCommentsList">
                            <!-- Comments will be dynamically added here -->
                        </div>
                        <div class="add-comment">
                            <h4>Add Your Comment</h4>
                            <div class="form-group">
                                <input type="text" id="detailCommentName" placeholder="Your Name" required>
                            </div>
                            <textarea id="detailCommentText" placeholder="Share your thoughts about this book..."></textarea>
                            <button onclick="submitDetailComment()">Submit Comment</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content share-modal-content">
            <h3>Share This Book</h3>
            <p>Share this amazing story with your friends!</p>
            
            <div class="share-options">
                <div class="share-option" onclick="shareViaWhatsApp()">
                    <i class="fab fa-whatsapp"></i>
                    <span>WhatsApp</span>
                </div>
                <div class="share-option" onclick="shareViaTwitter()">
                    <i class="fab fa-twitter"></i>
                    <span>Twitter</span>
                </div>
                <div class="share-option" onclick="shareViaFacebook()">
                    <i class="fab fa-facebook"></i>
                    <span>Facebook</span>
                </div>
                <div class="share-option" onclick="copyShareLink()">
                    <i class="fas fa-copy"></i>
                    <span>Copy Link</span>
                </div>
            </div>
            
            <div class="share-link">
                <strong>Direct Link:</strong><br>
                <span id="shareLinkText">https://tejkumarwritings.com/book/</span>
            </div>
            
            <div class="modal-buttons">
                <button class="modal-ok-btn" onclick="closeShareModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content login-modal-content">
            <h3><i class="fas fa-user-shield"></i> Admin Login</h3>
            <div class="login-form">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" placeholder="Enter username" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="adminPassword" placeholder="Enter password" required>
                        <button type="button" class="toggle-password" id="togglePassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <div class="error-message" id="loginError">
                    <i class="fas fa-exclamation-circle"></i> Invalid username or password
                </div>
            </div>
            <div class="modal-buttons">
                <button class="modal-ok-btn" onclick="adminLogin()">Login</button>
                <button class="copy-btn" onclick="closeLoginModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Admin credentials
        const ADMIN_USERNAME = "Tejkumar117";
        const ADMIN_PASSWORD = "Tej@9079917";
        
        // Book data structure with auto-approval system
        let books = [];
        let nextCheckTime = null;
        const APPROVAL_DELAY = 48 * 60 * 60 * 1000; // 48 hours in milliseconds
        
        // Admin state
        let isAdminLoggedIn = false;
        let currentAdminTab = 'pending';
        
        // Current book for detail modal
        let currentBookForDetail = null;
        let currentBookForShare = null;

        // Initialize books from localStorage or use sample data
        function initializeBooks() {
            const savedBooks = localStorage.getItem('tejKumarBooks');
            if (savedBooks) {
                books = JSON.parse(savedBooks);
            } else {
                // Sample book data without fake comments
                books = [
                    {
                        id: 1,
                        title: "Mr. Romeo",
                        author: "R. Tej Kumar Reddy",
                        genre: "Crime", // Changed to Crime genre
                        description: "It all starts here in Chapter 1: The Beginning of Darkness. Three friends in Tirupati thought they buried a secret on a lonely night. But someone was watching. Someone who believes that true love never diesit just waits for revenge.  Who is this mysterious 'Mister Romeo'? Why is he hunting them down one by one?",
                        driveLink: "https://drive.google.com/file/d/1TRsv0crqfNbTWHvF3dpMfnnOJ8H9Gbac/view?usp=drive_link",
                        coverImage: "https://drive.google.com/thumbnail?id=1hg1Jt6OgSSaQerLcWaT4WUsXC2EKeY58&sz=w1000",
                        uploadDate: "2023-11-30",
                        submissionTime: new Date("2023-11-30").getTime(),
                        approved: true, // This sample book is pre-approved
                        approvalTime: new Date("2023-11-30").getTime(),
                        rating: 4.2,
                        ratingsCount: 12,
                        comments: [] // Empty comments array - no fake comments
                    }
                ];
                saveBooks();
            }
            
            // Check admin login state
            checkAdminLogin();
            
            // Run auto-approval check
            checkAutoApproval();
        }

        // Save books to localStorage
        function saveBooks() {
            localStorage.setItem('tejKumarBooks', JSON.stringify(books));
        }
        
        // Check and auto-approve books older than 48 hours
        function checkAutoApproval() {
            const now = Date.now();
            let approvedCount = 0;
            let nextPendingTime = null;
            
            books.forEach(book => {
                if (!book.approved && book.submissionTime) {
                    const timeSinceSubmission = now - book.submissionTime;
                    
                    if (timeSinceSubmission >= APPROVAL_DELAY) {
                        // Auto-approve this book
                        book.approved = true;
                        book.approvalTime = now;
                        approvedCount++;
                        
                        console.log(`Auto-approved book: ${book.title}`);
                    } else {
                        // Track the next book that will be approved
                        const timeRemaining = APPROVAL_DELAY - timeSinceSubmission;
                        if (!nextPendingTime || timeRemaining < nextPendingTime) {
                            nextPendingTime = timeRemaining;
                        }
                    }
                }
            });
            
            // Save if any books were approved
            if (approvedCount > 0) {
                saveBooks();
                renderBooks();
                updateNextCheckTimer();
                renderAdminLists();
                
                // Show notification if on home page
                if (document.getElementById('home').classList.contains('active') && approvedCount > 0) {
                    showAutoApprovalNotification(approvedCount);
                }
            }
            
            // Update next check timer
            updateNextCheckTimer();
            
            // Schedule next check (every hour)
            setTimeout(checkAutoApproval, 60 * 60 * 1000);
        }

        // Show auto-approval notification
        function showAutoApprovalNotification(count) {
            const notification = document.createElement('div');
            notification.className = 'upload-success';
            notification.style.display = 'block';
            notification.style.animation = 'fadeIn 0.5s ease';
            notification.innerHTML = `
                <h4><i class="fas fa-robot"></i> Auto-Approval Complete!</h4>
                <p><strong>${count} book${count > 1 ? 's' : ''}</strong> have been automatically approved and moved to the main library.</p>
            `;
            
            const uploadSection = document.querySelector('.upload-section');
            uploadSection.insertBefore(notification, uploadSection.querySelector('.admin-section'));
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'fadeIn 0.5s ease reverse';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }

        // Update next check timer display
        function updateNextCheckTimer() {
            const now = Date.now();
            let nextCheck = null;
            
            // Find the next pending book to be approved
            books.forEach(book => {
                if (!book.approved && book.submissionTime) {
                    const approvalTime = book.submissionTime + APPROVAL_DELAY;
                    if (!nextCheck || approvalTime < nextCheck) {
                        nextCheck = approvalTime;
                    }
                }
            });
            
            const timerElement = document.getElementById('nextCheckTimer');
            if (!timerElement) return;
            
            if (nextCheck) {
                const timeRemaining = nextCheck - now;
                if (timeRemaining > 0) {
                    const hours = Math.floor(timeRemaining / (60 * 60 * 1000));
                    const minutes = Math.floor((timeRemaining % (60 * 60 * 1000)) / (60 * 1000));
                    timerElement.textContent = `${hours}h ${minutes}m`;
                } else {
                    timerElement.textContent = "Any moment now!";
                }
            } else {
                timerElement.textContent = "No pending books";
            }
        }

        // Calculate time remaining for a pending book
        function getTimeRemaining(submissionTime) {
            const now = Date.now();
            const timeSinceSubmission = now - submissionTime;
            const timeRemaining = APPROVAL_DELAY - timeSinceSubmission;
            
            if (timeRemaining <= 0) return "Ready for approval";
            
            const hours = Math.floor(timeRemaining / (60 * 60 * 1000));
            const minutes = Math.floor((timeRemaining % (60 * 60 * 1000)) / (60 * 1000));
            
            return `${hours}h ${minutes}m`;
        }

        // Theme Management
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const savedTheme = localStorage.getItem('theme');
            
            // Check for saved theme or use system preference
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                updateThemeIcon(savedTheme);
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.setAttribute('data-theme', 'dark');
                updateThemeIcon('dark');
            }
            
            // Theme toggle click handler
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });
        }
        
        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('themeIcon');
            if (theme === 'dark') {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                themeIcon.title = "Switch to light mode";
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                themeIcon.title = "Switch to dark mode";
            }
        }

        // Admin Login Functions
        function checkAdminLogin() {
            const savedAdminState = localStorage.getItem('adminLoggedIn');
            if (savedAdminState === 'true') {
                isAdminLoggedIn = true;
                updateAdminUI();
                renderAdminLists();
            }
        }
        
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.getElementById('loginError').style.display = 'none';
            document.getElementById('adminPassword').type = 'password';
            document.getElementById('togglePassword').innerHTML = '<i class="fas fa-eye"></i>';
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }
        
        // Toggle password visibility
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('adminPassword');
            const toggleIcon = document.getElementById('togglePassword');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.innerHTML = '<i class="fas fa-eye-slash"></i>';
                toggleIcon.title = "Hide password";
            } else {
                passwordInput.type = 'password';
                toggleIcon.innerHTML = '<i class="fas fa-eye"></i>';
                toggleIcon.title = "Show password";
            }
        }
        
        function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                localStorage.setItem('adminLoggedIn', 'true');
                updateAdminUI();
                renderAdminLists();
                closeLoginModal();
                
                // Show success message
                showAdminLoginSuccess();
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }
        
        function adminLogout() {
            isAdminLoggedIn = false;
            localStorage.removeItem('adminLoggedIn');
            updateAdminUI();
            
            // Show logout message
            showAdminLogoutSuccess();
        }
        
        function updateAdminUI() {
            const adminBtn = document.getElementById('adminLoginBtn');
            const adminPanelIndicator = document.getElementById('adminPanelIndicator');
            const adminPanel = document.getElementById('adminPanel');
            const autoApprovalInfo = document.getElementById('autoApprovalInfo');
            
            if (isAdminLoggedIn) {
                adminBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
                adminBtn.className = 'admin-btn logout';
                adminBtn.onclick = adminLogout;
                adminPanelIndicator.style.display = 'block';
                adminPanel.style.display = 'block';
                autoApprovalInfo.style.display = 'none';
            } else {
                adminBtn.innerHTML = '<i class="fas fa-user-shield"></i> Admin Login';
                adminBtn.className = 'admin-btn';
                adminBtn.onclick = showLoginModal;
                adminPanelIndicator.style.display = 'none';
                adminPanel.style.display = 'none';
                autoApprovalInfo.style.display = 'block';
            }
            
            // Re-render books to show/hide admin controls
            renderBooks();
        }
        
        function showAdminLoginSuccess() {
            const notification = document.createElement('div');
            notification.className = 'upload-success';
            notification.style.display = 'block';
            notification.style.animation = 'fadeIn 0.5s ease';
            notification.innerHTML = `
                <h4><i class="fas fa-user-shield"></i> Admin Login Successful!</h4>
                <p>You now have admin privileges. You can approve books immediately and manage content.</p>
            `;
            
            const uploadSection = document.querySelector('.upload-section');
            uploadSection.insertBefore(notification, uploadSection.querySelector('.admin-section'));
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'fadeIn 0.5s ease reverse';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }
        
        function showAdminLogoutSuccess() {
            const notification = document.createElement('div');
            notification.className = 'upload-success';
            notification.style.display = 'block';
            notification.style.animation = 'fadeIn 0.5s ease';
            notification.innerHTML = `
                <h4><i class="fas fa-sign-out-alt"></i> Admin Logout Successful!</h4>
                <p>You have been logged out from admin mode.</p>
            `;
            
            const uploadSection = document.querySelector('.upload-section');
            uploadSection.insertBefore(notification, uploadSection.querySelector('.admin-section'));
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'fadeIn 0.5s ease reverse';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }
        
        // Admin Panel Functions
        function showAdminTab(tabName) {
            currentAdminTab = tabName;
            
            // Update tab buttons
            document.querySelectorAll('.admin-tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Show selected tab content
            document.querySelectorAll('.admin-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Render the tab content
            renderAdminLists();
        }
        
        function renderAdminLists() {
            if (!isAdminLoggedIn) return;
            
            renderAdminPendingBooksList();
            renderAdminAllBooksList();
            renderAdminCommentsList();
        }
        
        function renderAdminPendingBooksList() {
            const pendingBooksList = document.getElementById('adminPendingBooksList');
            const pendingBooks = books.filter(book => !book.approved);
            
            if (pendingBooks.length === 0) {
                pendingBooksList.innerHTML = '<p>No pending books at the moment.</p>';
                return;
            }
            
            let html = '';
            pendingBooks.forEach(book => {
                const timeRemaining = getTimeRemaining(book.submissionTime);
                html += `
                    <div class="admin-list-item">
                        <div class="admin-list-item-info">
                            <div class="admin-list-item-title">${book.title}</div>
                            <div class="admin-list-item-meta">
                                by ${book.author} | ${book.genre} | Submitted: ${book.uploadDate} | Auto-approval in: ${timeRemaining}
                            </div>
                        </div>
                        <div class="admin-list-item-actions">
                            <button class="admin-action-btn approve" onclick="adminApproveBook(${book.id})">Approve Now</button>
                            <button class="admin-action-btn delete" onclick="adminDeleteBook(${book.id})">Delete</button>
                            <button class="admin-action-btn view" onclick="viewBookDetails(${book.id})">View</button>
                        </div>
                    </div>
                `;
            });
            
            pendingBooksList.innerHTML = html;
        }
        
        function renderAdminAllBooksList() {
            const allBooksList = document.getElementById('adminAllBooksList');
            
            if (books.length === 0) {
                allBooksList.innerHTML = '<p>No books in the library yet.</p>';
                return;
            }
            
            let html = '';
            books.forEach(book => {
                const status = book.approved ? 'Approved' : 'Pending';
                html += `
                    <div class="admin-list-item">
                        <div class="admin-list-item-info">
                            <div class="admin-list-item-title">${book.title}</div>
                            <div class="admin-list-item-meta">
                                by ${book.author} | ${book.genre} | Status: ${status} | Rating: ${book.rating.toFixed(1)} (${book.ratingsCount})
                            </div>
                        </div>
                        <div class="admin-list-item-actions">
                            ${!book.approved ? `<button class="admin-action-btn approve" onclick="adminApproveBook(${book.id})">Approve</button>` : ''}
                            <button class="admin-action-btn delete" onclick="adminDeleteBook(${book.id})">Delete</button>
                            <button class="admin-action-btn view" onclick="viewBookDetails(${book.id})">View</button>
                        </div>
                    </div>
                `;
            });
            
            allBooksList.innerHTML = html;
        }
        
        function renderAdminCommentsList() {
            const commentsList = document.getElementById('adminCommentsList');
            let allComments = [];
            
            // Collect all comments from all books
            books.forEach(book => {
                book.comments.forEach((comment, index) => {
                    allComments.push({
                        bookId: book.id,
                        bookTitle: book.title,
                        commentIndex: index,
                        author: comment.author,
                        date: comment.date,
                        text: comment.text
                    });
                });
            });
            
            if (allComments.length === 0) {
                commentsList.innerHTML = '<p>No comments yet.</p>';
                return;
            }
            
            let html = '';
            allComments.forEach(comment => {
                const shortText = comment.text.length > 100 ? comment.text.substring(0, 100) + '...' : comment.text;
                html += `
                    <div class="comment-item">
                        <div class="comment-header">
                            <span class="comment-author">${comment.author}</span>
                            <span class="comment-date">${comment.date}</span>
                        </div>
                        <div class="comment-book">On: "${comment.bookTitle}"</div>
                        <div class="comment-text">${shortText}</div>
                        <div class="admin-list-item-actions">
                            <button class="admin-action-btn delete" onclick="adminDeleteComment(${comment.bookId}, ${comment.commentIndex})">Delete Comment</button>
                            <button class="admin-action-btn view" onclick="viewBookDetails(${comment.bookId})">View Book</button>
                        </div>
                    </div>
                `;
            });
            
            commentsList.innerHTML = html;
        }
        
        function adminApproveBook(bookId) {
            if (!isAdminLoggedIn) {
                alert('Admin login required to approve books.');
                return;
            }
            
            const book = books.find(book => book.id === bookId);
            if (book && !book.approved) {
                book.approved = true;
                book.approvalTime = Date.now();
                saveBooks();
                renderBooks();
                renderAdminLists();
                
                // Show approval confirmation
                showAdminActionNotification(`Book "${book.title}" has been approved immediately.`);
            }
        }
        
        function adminDeleteBook(bookId) {
            if (!isAdminLoggedIn) {
                alert('Admin login required to delete books.');
                return;
            }
            
            if (confirm('Are you sure you want to delete this book? This action cannot be undone.')) {
                const bookIndex = books.findIndex(book => book.id === bookId);
                if (bookIndex !== -1) {
                    const bookTitle = books[bookIndex].title;
                    books.splice(bookIndex, 1);
                    saveBooks();
                    renderBooks();
                    renderAdminLists();
                    
                    // Show deletion confirmation
                    showAdminActionNotification(`Book "${bookTitle}" has been deleted.`);
                }
            }
        }
        
        function adminDeleteComment(bookId, commentIndex) {
            if (!isAdminLoggedIn) {
                alert('Admin login required to delete comments.');
                return;
            }
            
            if (confirm('Are you sure you want to delete this comment?')) {
                const book = books.find(book => book.id === bookId);
                if (book && book.comments[commentIndex]) {
                    const commentText = book.comments[commentIndex].text;
                    const commentAuthor = book.comments[commentIndex].author;
                    const commentPreview = commentText.length > 30 ? commentText.substring(0, 30) + '...' : commentText;
                    
                    book.comments.splice(commentIndex, 1);
                    saveBooks();
                    
                    // Re-render detail modal if it's open
                    if (currentBookForDetail && currentBookForDetail.id === bookId) {
                        openBookDetail(bookId);
                    }
                    
                    // Update admin lists
                    renderAdminLists();
                    
                    // Show deletion confirmation
                    showAdminActionNotification(`Comment by "${commentAuthor}" has been deleted.`);
                }
            }
        }
        
        function viewBookDetails(bookId) {
            closeBookDetailModal(); // Close if open
            openBookDetail(bookId);
        }
        
        function showAdminActionNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'upload-success';
            notification.style.display = 'block';
            notification.style.animation = 'fadeIn 0.5s ease';
            notification.innerHTML = `
                <h4><i class="fas fa-check-circle"></i> Admin Action Complete</h4>
                <p>${message}</p>
            `;
            
            const uploadSection = document.querySelector('.upload-section');
            uploadSection.insertBefore(notification, uploadSection.querySelector('.admin-section'));
            
            // Remove notification after 5 seconds
            setTimeout(() => {
                notification.style.animation = 'fadeIn 0.5s ease reverse';
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }

        // Page Navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show the selected section
            document.getElementById(sectionId).classList.add('active');
            
            // If it's the home section, make sure the main content is visible
            if (sectionId === 'home') {
                document.querySelector('.main-content').style.display = 'flex';
                renderBooks();
                updateNextCheckTimer();
                if (isAdminLoggedIn) {
                    renderAdminLists();
                }
            } else {
                document.querySelector('.main-content').style.display = 'none';
            }
            
            // If it's the library section, render the books
            if (sectionId === 'library' || sectionId === 'home') {
                renderBooks();
            }
            
            // Scroll to top
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // Scroll Effect for Header
        window.addEventListener('scroll', function() {
            const header = document.getElementById('mainHeader');
            const floatingLogo = document.querySelector('.floating-logo');
            const floatingLogoFallback = document.querySelector('.floating-logo-fallback');
            
            if (window.scrollY > 100) {
                header.classList.add('scrolled');
                floatingLogo.classList.add('visible');
                if (floatingLogoFallback) floatingLogoFallback.classList.add('visible');
            } else {
                header.classList.remove('scrolled');
                floatingLogo.classList.remove('visible');
                if (floatingLogoFallback) floatingLogoFallback.classList.remove('visible');
            }
        });

        // Book Submission
        function submitBook() {
            const driveLink = document.getElementById('driveLink').value;
            const bookTitle = document.getElementById('bookTitle').value;
            const bookAuthor = document.getElementById('bookAuthor').value;
            const bookDescription = document.getElementById('bookDescription').value;
            const bookGenre = document.getElementById('bookGenre').value;
            const submitterEmail = document.getElementById('submitterEmail').value;
            const bookCoverLink = document.getElementById('bookCoverLink').value;
            
            // Basic validation
            if (!driveLink || !bookTitle || !bookAuthor || !submitterEmail) {
                alert('Please fill in all required fields (marked with *)');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(submitterEmail)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Validate Google Drive link format
            const driveRegex = /https:\/\/drive\.google\.com\/file\/d\/[^\/]+\/view/;
            if (!driveRegex.test(driveLink)) {
                alert('Please enter a valid Google Drive file link (should end with /view)');
                return;
            }
            
            // Create a new book object
            const newBook = {
                id: Date.now(), // Use timestamp as unique ID
                title: bookTitle,
                author: bookAuthor,
                genre: bookGenre || "Other",
                description: bookDescription,
                driveLink: driveLink,
                coverImage: bookCoverLink || "", // Added cover image support
                uploadDate: new Date().toISOString().split('T')[0], // Today's date
                submissionTime: Date.now(), // Current timestamp for auto-approval
                approved: false, // Not approved yet
                rating: 0, // Default rating
                ratingsCount: 0,
                comments: [] // Empty comments array
            };
            
            // Add the book to the books array
            books.push(newBook);
            saveBooks();
            
            // Show success message
            showUploadSuccess();
            
            // Reset form
            document.getElementById('driveLink').value = '';
            document.getElementById('bookTitle').value = '';
            document.getElementById('bookAuthor').value = '';
            document.getElementById('bookDescription').value = '';
            document.getElementById('bookGenre').value = '';
            document.getElementById('submitterEmail').value = '';
            document.getElementById('bookCoverLink').value = '';
            
            // Re-render books to show the new addition
            renderBooks();
            updateNextCheckTimer();
            
            // Update admin lists if admin is logged in
            if (isAdminLoggedIn) {
                renderAdminLists();
            }
            
            // Show confirmation modal
            document.getElementById('confirmationModal').style.display = 'flex';
        }

        // Show upload success message
        function showUploadSuccess() {
            const successMsg = document.getElementById('uploadSuccess');
            successMsg.style.display = 'block';
            
            // Hide the message after 5 seconds
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 5000);
        }

        // Scroll to Top
        function scrollToTop() {
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        // Modal Functions
        function closeModal() {
            document.getElementById('confirmationModal').style.display = 'none';
        }
        
        function closeBookDetailModal() {
            document.getElementById('bookDetailModal').style.display = 'none';
            currentBookForDetail = null;
        }
        
        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
            currentBookForShare = null;
        }

        // Open Book Detail Modal
        function openBookDetail(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;
            
            currentBookForDetail = book;
            
            // Set book details in modal
            document.getElementById('detailBookTitle').textContent = book.title;
            document.getElementById('detailBookAuthor').textContent = `by ${book.author}`;
            document.getElementById('detailBookGenre').textContent = book.genre;
            document.getElementById('detailBookDescription').textContent = book.description || "No description available.";
            document.getElementById('detailBookRating').textContent = `${book.rating.toFixed(1)} (${book.ratingsCount})`;
            
            // Set book cover
            const coverImg = document.getElementById('detailBookCover');
            const coverPlaceholder = document.getElementById('detailCoverPlaceholder');
            if (book.coverImage) {
                coverImg.src = book.coverImage;
                coverImg.style.display = 'block';
                coverPlaceholder.style.display = 'none';
            } else {
                coverImg.style.display = 'none';
                coverPlaceholder.style.display = 'flex';
            }
            
            // Generate star rating
            document.getElementById('detailBookStars').innerHTML = generateStarRating(book.rating);
            
            // Render comments
            const commentsList = document.getElementById('detailCommentsList');
            commentsList.innerHTML = '';
            
            if (book.comments.length === 0) {
                commentsList.innerHTML = '<p>No comments yet. Be the first to share your thoughts!</p>';
            } else {
                book.comments.forEach((comment, index) => {
                    const commentElement = document.createElement('div');
                    commentElement.className = 'comment';
                    
                    // Add delete button for admin
                    let deleteBtn = '';
                    if (isAdminLoggedIn) {
                        deleteBtn = `<button class="comment-delete-btn" onclick="adminDeleteComment(${book.id}, ${index}, event)" title="Delete Comment">
                            <i class="fas fa-trash"></i>
                        </button>`;
                    }
                    
                    commentElement.innerHTML = `
                        <div class="comment-header">
                            <span class="comment-author">${comment.author}</span>
                            <span class="comment-date">${comment.date}</span>
                        </div>
                        <div class="comment-text">${comment.text}</div>
                        ${deleteBtn}
                    `;
                    commentsList.appendChild(commentElement);
                });
            }
            
            // Clear comment input fields
            document.getElementById('detailCommentName').value = '';
            document.getElementById('detailCommentText').value = '';
            
            // Show modal
            document.getElementById('bookDetailModal').style.display = 'flex';
        }
        
        // Open book from detail modal
        function openBookFromDetail() {
            if (currentBookForDetail && currentBookForDetail.driveLink) {
                window.open(currentBookForDetail.driveLink, '_blank');
            }
        }
        
        // Share book from detail modal
        function shareBookFromDetail() {
            if (currentBookForDetail) {
                openShareModal(currentBookForDetail);
            }
        }
        
        // Submit comment in detail modal
        function submitDetailComment() {
            const commentName = document.getElementById('detailCommentName').value.trim();
            const commentText = document.getElementById('detailCommentText').value.trim();
            
            if (!commentName) {
                alert('Please enter your name before submitting a comment.');
                return;
            }
            
            if (!commentText) {
                alert('Please enter a comment before submitting.');
                return;
            }
            
            if (!currentBookForDetail) return;
            
            const book = books.find(b => b.id === currentBookForDetail.id);
            if (!book) return;
            
            // Add new comment
            const newComment = {
                author: commentName,
                date: new Date().toISOString().split('T')[0],
                text: commentText
            };
            
            book.comments.push(newComment);
            saveBooks();
            
            // Clear comment field
            document.getElementById('detailCommentText').value = '';
            
            // Re-render comments
            openBookDetail(book.id);
            
            // Update admin lists if admin is logged in
            if (isAdminLoggedIn) {
                renderAdminLists();
            }
        }
        
        // Share Functions
        function shareBook(bookId, event) {
            if (event) event.stopPropagation();
            const book = books.find(b => b.id === bookId);
            if (book) {
                openShareModal(book);
            }
        }
        
        function openShareModal(book) {
            currentBookForShare = book;
            document.getElementById('shareLinkText').textContent = book.driveLink;
            document.getElementById('shareModal').style.display = 'flex';
        }
        
        function shareViaWhatsApp() {
            if (!currentBookForShare) return;
            
            const text = `Check out "${currentBookForShare.title}" by ${currentBookForShare.author} on Tej Kumar Writings!`;
            const url = `https://wa.me/?text=${encodeURIComponent(text + ' ' + currentBookForShare.driveLink)}`;
            window.open(url, '_blank');
        }
        
        function shareViaTwitter() {
            if (!currentBookForShare) return;
            
            const text = `Check out "${currentBookForShare.title}" by ${currentBookForShare.author} on Tej Kumar Writings!`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(currentBookForShare.driveLink)}`;
            window.open(url, '_blank');
        }
        
        function shareViaFacebook() {
            if (!currentBookForShare) return;
            
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentBookForShare.driveLink)}`;
            window.open(url, '_blank');
        }
        
        function copyShareLink() {
            if (!currentBookForShare) return;
            
            navigator.clipboard.writeText(currentBookForShare.driveLink).then(() => {
                alert('Book link copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy link: ', err);
                // Fallback method
                const tempInput = document.createElement('input');
                tempInput.value = currentBookForShare.driveLink;
                document.body.appendChild(tempInput);
                tempInput.select();
                document.execCommand('copy');
                document.body.removeChild(tempInput);
                alert('Book link copied to clipboard!');
            });
        }

        // Render books in the library
        function renderBooks() {
            const approvedBookList = document.getElementById('approvedBookList');
            const pendingBookList = document.getElementById('pendingBookList');
            const bookListLibrary = document.getElementById('bookListLibrary');
            
            // Clear existing books
            approvedBookList.innerHTML = '';
            pendingBookList.innerHTML = '';
            bookListLibrary.innerHTML = '';
            
            // Separate approved and pending books
            const approvedBooks = books.filter(book => book.approved);
            const pendingBooks = books.filter(book => !book.approved);
            
            // Sort books
            sortBooks('approved');
            
            // Add approved books to the library
            if (approvedBooks.length === 0) {
                approvedBookList.innerHTML = `
                    <div class="empty-library">
                        <i class="fas fa-book-open"></i>
                        <h3>No Approved Books Yet</h3>
                        <p>Be the first to submit a book to our library!</p>
                    </div>
                `;
            } else {
                approvedBooks.forEach(book => {
                    const bookCard = createBookCard(book, false);
                    approvedBookList.appendChild(bookCard);
                    
                    // Clone for library section
                    const libraryCard = createBookCard(book, false);
                    bookListLibrary.appendChild(libraryCard);
                });
            }
            
            // Add pending books
            if (pendingBooks.length === 0) {
                pendingBookList.innerHTML = `
                    <div class="empty-library">
                        <i class="fas fa-clock"></i>
                        <h3>No Pending Books</h3>
                        <p>All books have been approved!</p>
                    </div>
                `;
            } else {
                pendingBooks.forEach(book => {
                    const bookCard = createBookCard(book, true);
                    pendingBookList.appendChild(bookCard);
                });
            }
        }

        // Create a book card element
        function createBookCard(book, isPending = false) {
            const bookCard = document.createElement('div');
            bookCard.className = `book-card ${isPending ? 'pending' : 'approved'}`;
            bookCard.setAttribute('data-id', book.id);
            
            // Create star rating HTML
            const starsHTML = generateStarRating(book.rating);
            
            // Status badge
            let statusBadge = '';
            if (isPending) {
                const timeRemaining = getTimeRemaining(book.submissionTime);
                statusBadge = `<div class="book-status status-pending">Pending (${timeRemaining})</div>`;
            } else {
                statusBadge = `<div class="book-status status-approved">Approved</div>`;
            }
            
            // Share button (only for approved books)
            let shareButton = '';
            if (!isPending) {
                shareButton = `<button class="share-btn" onclick="shareBook(${book.id}, event)" title="Share this book">
                    <i class="fas fa-share-alt"></i>
                </button>`;
            }
            
            // Admin controls
            let adminControls = '';
            if (isAdminLoggedIn) {
                adminControls = `
                    <div class="admin-controls">
                        ${isPending ? `<button class="admin-control-btn approve" onclick="adminApproveBook(${book.id})" title="Approve Book Immediately">
                            <i class="fas fa-check"></i>
                        </button>` : ''}
                        <button class="admin-control-btn delete" onclick="adminDeleteBook(${book.id})" title="Delete Book">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            }
            
            // Click handler for book card
            bookCard.onclick = function(event) {
                // Don't open detail if clicking on share button or admin controls
                if (!event.target.closest('.share-btn') && !event.target.closest('.admin-controls')) {
                    openBookDetail(book.id);
                }
            };
            
            bookCard.innerHTML = `
                <div class="book-cover">
                    ${book.coverImage ? 
                        `<img src="${book.coverImage}" alt="${book.title} Cover" onerror="this.style.display='none';">` : 
                        `<i class="fas fa-book"></i>`
                    }
                </div>
                <div class="book-title">${book.title}</div>
                <div class="book-author">by ${book.author}</div>
                <div class="book-genre">${book.genre}</div>
                ${statusBadge}
                ${!isPending ? `
                <div class="book-rating">
                    <div class="stars">${starsHTML}</div>
                    <div class="rating-value">${book.rating.toFixed(1)} (${book.ratingsCount})</div>
                </div>` : ''}
                ${shareButton}
                ${adminControls}
            `;
            
            return bookCard;
        }

        // Generate star rating HTML
        function generateStarRating(rating) {
            let starsHTML = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    starsHTML += '<i class="fas fa-star"></i>';
                } else if (i === fullStars + 1 && hasHalfStar) {
                    starsHTML += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    starsHTML += '<i class="far fa-star"></i>';
                }
            }
            
            return starsHTML;
        }

        // Sort books
        function sortBooks(type = 'approved') {
            let booksToSort = type === 'approved' ? 
                books.filter(book => book.approved) : 
                books;
            
            const sortBy = type === 'approved' ? 
                document.getElementById('sortBy').value : 
                document.getElementById('sortByLibrary').value;
            
            booksToSort.sort((a, b) => {
                switch(sortBy) {
                    case 'title':
                        return a.title.localeCompare(b.title);
                    case 'genre':
                        return a.genre.localeCompare(b.genre);
                    case 'rating':
                        return b.rating - a.rating;
                    case 'uploadDate':
                    default:
                        return new Date(b.uploadDate) - new Date(a.uploadDate);
                }
            });
            
            renderBooks();
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme first
            initializeTheme();
            
            // Initialize books and auto-approval system
            initializeBooks();
            
            // Setup password toggle
            document.getElementById('togglePassword').addEventListener('click', togglePasswordVisibility);
            
            // Then show default section and render books
            showSection('home');
            
            // Update next check timer every minute
            setInterval(updateNextCheckTimer, 60000);
        });
    </script>
</body>
</html>
